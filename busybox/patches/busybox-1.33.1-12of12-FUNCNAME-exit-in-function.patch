--- src/shell/ash.c	2021-08-22 02:19:22.969712333 +0200
+++ src.7/shell/ash.c	2021-08-22 02:17:03.785711531 +0200
@@ -9789,7 +9789,7 @@ evalfun(struct funcnode *func, int argc,
 	evaltree(func->n.ndefun.body, flags & EV_TESTED);
  funcdone:
 	INT_OFF;
-	if(exitstatus && eflag) {
+	if((exitstatus && eflag) || (e)) {
 		/* memmory leak is not a problem, we are exiting */
 	} else {
 		if(funcname)
